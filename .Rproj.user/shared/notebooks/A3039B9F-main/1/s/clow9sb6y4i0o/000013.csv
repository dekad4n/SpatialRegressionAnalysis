"0","# Join the data to the subplots"
"0","subplots_yield <- sf::st_join(trial_design_subplots, yield)"
"0","subplots_nh3 <- sf::st_join(trial_design_subplots, nh3)"
"0","subplots_ec <- sf::st_join(trial_design_subplots, ec_shp)"
"0",""
"0","# Aggregate the joined data"
"0","yield_aggregated <- aggregate(subplots_yield[""yield""], by = list(subplots_yield$id), FUN = mean, na.rm = TRUE)"
"0","nh3_aggregated <- aggregate(subplots_nh3[""aa_NH3""], by = list(subplots_nh3$id), FUN = mean, na.rm = TRUE)"
"0","ec_shp_aggregated <- aggregate(subplots_ec[""ec""], by = list(subplots_ec$id), FUN = mean, na.rm = TRUE)"
"0",""
"0","# Combine the aggregated data"
"0","combined <- data.frame(yield_aggregated, aa_NH3 = nh3_aggregated$aa_NH3, ec = ec_shp_aggregated$ec)"
"0",""
"0","names(combined)[names(combined) == ""Group.1""] <- ""id"""
"0",""
